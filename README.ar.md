[ردم.إن.مد](README.en.md)

لأن[اردوينو STL الأصلي](https://github.com/mike-matera/ArduinoSTL)لم يقم المؤلف بتحديثه لفترة طويلة (202203~202212)، لقد أصدرت هذا الفرع إلى مكتبة Arduino العامة وأعدت تسميته Cpp_Standard_Library لتمييزه.

تحاول هذه المكتبة تنفيذ معظم وظائف المكتبة القياسية C++11~17 (STL) على Arduino. بالإضافة إلى ArduinoSTL، تشير بعض وظائف هذه المكتبة أيضًا إلى MSVC وLLVM وboost وGC. نظرًا لأن الواجهة تعتمد على STL، فليست هناك حاجة لكتابة مستندات إضافية، ويمكنك الرجوع إلى أي مستند STL موثوق. ما لم يُنص على خلاف ذلك، يجب أن يكون استخدام هذه المكتبة هو نفسه. وإذا كان مختلفًا، فيجب أن يكون هناك خطأ. فنحن نرحب بك لتقديم مشكلة.

إذا كنت بحاجة إلى بعض الوظائف الموجودة في المكتبة القياسية ولكن لم يتم توفيرها في هذه المكتبة، فنحن نرحب أيضًا بإرسال إصدار، وسيقوم المؤلف بتنفيذه لك أولاً.

يتم دعم البنيات التالية ولكنها تتطلب تكوينًا إضافيًا:

-   AVR，要求C++17。需要更改`%LOCALAPPDATA%\Arduino15\packages\arduino\hardware\avr\*.*.*\platform.txt`حيادي`-std=gnu++11`ل`-std=gnu++17`
-   سام، يتطلب C++ 11. بحاجة إلى أن تكون في`%LOCALAPPDATA%\Arduino15\packages\arduino\hardware\sam\*.*.*\platform.txt`حيادي`compiler.cpp.flags`اضف الى`-fpermissive`راية
-   ESP32، يتطلب C++ 17. الحاجة للتغيير`%LOCALAPPDATA%\Arduino15\packages\arduino\hardware\esp32\*.*.*\platform.txt`الكل فى`-std=gnu++11`ل`-std=gnu++17`، و في`compiler.cpp.flags`اضف الى`-fpermissive`راية

قبل تضمين أي ملف رأس قياسي لـ C++، يجب عليك أولاً تضمينه`Cpp_Standard_Library.h`. يعد هذا موجهًا إلى Arduino IDE، لإخبار المترجم أنه يجب تضمين هذه المكتبة في عملية التجميع.

# وظائف التوقيع (لا تقتصر على هذا)

-   `<algorithm> fill_n shuffle`
-   `<chrono> chrono::duration`
-   `<dynarray>`كان من المتوقع ذات مرة أن يدخل المشروع الملغى لمعيار C++. على الرغم من أنني لم أتمكن من الدخول في النهاية، ك`array`و`vector`الأنواع المتوسطة مفيدة جدًا.
-   `<functional> std::function`السلوك غير القياسي: عدم القيام بأي شيء عند استدعائه على كائن فارغ. وذلك لأن السلوك القياسي هو أنه يجب طرح استثناء، لكن Arduino لا يدعم الاستثناءات. إذا كنت لا تريد القيام بأي شيء عند استدعاء كائن فارغ، فيمكنك الاتصال به مباشرة دون التحقق مما إذا كان الكائن فارغًا.
-   `<iostream> cin cout endl`يستخدم`Serial`تنفيذ تدفقات الإدخال والإخراج القياسية. ومع ذلك، لا يزال يتعين عليك إجراء ذلك يدويًا`Serial.begin`. لا ينبغي أن يكون في`setup`يستخدم في مرحلة تهيئة المتغير العام قبل الوظيفة`Serial`،لأن`setup`ليس هناك ضمان قبل أن يتم استدعاؤه`Serial`تم الانتهاء من التهيئة، استخدم هذه المرة`Serial`هو سلوك غير محدد. بالإضافة إلى ذلك، وجد الاختبار أنه بالنسبة لبنية SAM، قد يرسل المنفذ التسلسلي بعض البايتات العشوائية بعد التهيئة مباشرة، ويبدو أن هذا عيب في تصميم الأجهزة لا يمكن حله على مستوى البرنامج، ويجب على الطرف المتلقي أن يأخذ هذه المشكلة في الاعتبار .
-   `<map>`
-   `<memory> unique_ptr make_unique`
-   `<random>`，`mt19937`فهو يستهلك قدرًا كبيرًا من الذاكرة (حوالي 5 كيلو بايت)، لذا استخدمه بحذر.`ArduinoUrng`هي منصة اردوينو محددة`UniformRandomNumberGenerator`، يمكن استخدامه ك`shuffle`، وهو عبارة عن برنامج مولد عشوائي زائف ويحتاج إلى تعيين بذرة عشوائية. كما تدعم بنية ESP32 أيضًا`EspUrng`، هو مولد عشوائي حقيقي للأجهزة ولا يدعم إعداد البذور.
-   `<ratio>`
-   `<set>`
-   `<type_traits>`
-   `<vector>`
-   `std::begin std::end`
-   إذا كان المترجم مزودًا ببعض وظائف المكتبة القياسية التي تحمل الاسم نفسه، فستكون الأولوية للإصدار الذي يأتي معها. قد يأتي المترجم مع ميزات مكتبة قياسية أخرى لا توفرها هذه المكتبة، ولا تتعارض هذه الميزات مع هذه المكتبة.

تذكر أن تتحقق من نموذج المشروع بعد التثبيت!

# الملف التمهيدي الأصلي (للإشارة فقط، بعض المحتويات قديمة)

هذا تطبيق لمكتبة C++ القياسية التي تم تجميعها كمكتبة Arduino. تدعم المكتبة تدريس صف CS-11M الخاص بي عن طريق إضافة ميزات C++ الرئيسية إلى بيئة Arduino.

يتم نقل المكتبة من uClibc++:

[حطب://جيت.كلبك.عرج/كلبك++](http://git.uclibc.org/uClibc++)

مع تنفيذ التدفقات من مكتبة Arduino الخاصة بـ Andy Brown:

[حطب://انديبروون.م.أك/٢٠١١/٠١/١٥/تحستندردتمبلتلبرريصتلفرفروثكصترمص/](http://andybrown.me.uk/2011/01/15/the-standard-template-library-stl-for-avr-with-c-streams/)

## باستخدام printf() و scanf()

يحتوي ملف رأس ArduinoSTL على رمز لربط منفذ تسلسلي من اختيارك به
البدائيات stdio. يحدث هذا تلقائيًا ولكن لا يزال يتعين على المستخدم الاتصال
المسلسل. البدء ()

```c++
#include <ArduinoSTL.h>

void setup() {
  Serial.begin(9600); 
  printf("Hello World\n");
}
```

## استخدام`cin`ان`cout`

عندما تقوم بتضمين ملف الرأس هذا، فإنك تحصل تلقائيًا على cin وcout بناءً على ذلك`Serial`. انظر أدناه لمعرفة كيفية تحديد جهازك الخاص. فيما يلي مثال للرسم باستخدام`cin`و`cout`.

```c++
#include <ArduinoSTL.h>

using namespace std;

void setup() {
  Serial.begin(9600);
  cout << "Feed me an integers." << endl;
}

void loop() {
  int foo;
  if (cin >> foo) { 
    cout << "You fed me " << foo << endl;
  }else{
    cin.clear();
    cin.ignore();
  }
}
```

## تغيير المنفذ التسلسلي

يمكنك تغيير ما المنفذ التسلسلي ذلك`cin`,`cout`و`printf()`يستخدم. يمكنك استخدام المنافذ التسلسلية المضمنة (على سبيل المثال.`Serial1`على ليوناردو) أو يمكنك استخدام المنافذ التسلسلية للبرامج التي يتم تنفيذها`Stream`.

### باستخدام منفذ مدمج

في`src/ArduinoSTL.cpp`تغيير قيمة`ARDUINOSTL_DEFAULT_SERIAL`. اترك الإعدادات الافتراضية الأخرى دون تعليق.

### باستخدام منفذ SoftwareSerial.

تعيين`ARDUINO_DEFAULT_SERAL`ل`NULL`. قم بالتعليق على الإعدادات الافتراضية الأخرى.

فيما يلي مثال للرسم الذي يستخدم SofwareSerial:

```c++
#include <ArduinoSTL.h>
#include <SoftwareSerial.h>

SoftwareSerial mySerial(0, 1);

namespace std { 
  ohserialstream cout(mySerial);
  ihserialstream cin(mySerial);
}

void setup() {
  mySerial.begin(9600);
  ArduinoSTL_Serial.connect(mySerial);
}
```

## تجنب إنشاء مثيل`cin`و`cout`

تصريح علني`ARDUINOSTL_DEFAULT_CIN_COUT`ولن يتم إنشاء مثيل لأي شيء. يجب عليك التعليق على هذه العلامة إذا كنت تنوي تحديد منفذ تسلسلي غير افتراضي. ليس هناك نفقات عامة ملحوظة للاستخدام`printf()`لذلك لا يمكنك حاليًا تجنب تهيئته.

## مشاكل معروفة

طباعة العوامات والمزدوجة باستخدام`cout`يتجاهل محددات التنسيق.

يبدو أن uClibc مكتمل إلى حد ما. تعمل كل من السلاسل النصية والمتجهات، حتى مع الكمية المحدودة من الكومة المتاحة لاردوينو. يمكن العثور على صفحة حالة uClibc++ هنا:

[هتبص://سكسكس.كلبك.عرج/ستتس.هتمل](https://cxx.uclibc.org/status.html)

استخدم دائمًا أحدث إصدار من Arduino IDE. تستخدم هذه المكتبة مواصفات مكتبة Arduino IDE الإصدار 2.1 مع الميزات المتوفرة فقط في Arduino 1.6.10 والإصدارات الأحدث. المواصفات تجدها هنا:

[هتبص://جذب.كوم/أرضين/أرضين/ويكي/اردوينو-يدي-١.خ:ليبرريصبكفكت](https://github.com/arduino/Arduino/wiki/Arduino-IDE-1.5:-Library-specification)

## رخصة

مكتبة uClibc++ مرخصة بموجب LGPL. يعتمد هذا المشروع على LGPL ليكون متوافقًا مع الجزء الأكبر من الكود الذي يستخدمه. ما لم يُذكر خلاف ذلك، فإن كل التعليمات البرمجية مرخصة بموجب LGPL. هناك استثناء واحد:

-   تم ترخيص src/serstream بموجب ترخيص BSD وفقًا لرغبات Andy Brown هنا:[حطب://انديبروون.م.أك/ترمسيندكندشنص/](http://andybrown.me.uk/terms-and-conditions/)
